# ============================================
# Backup Configuration File
# ============================================
# Diese Datei wird von allen Backup-Scripts gelesen
# Source in Scripts mit: source /etc/storebackend/backup.conf

# ============================================
# DATABASE CONFIGURATION
# ============================================
DB_NAME="storedb"
DB_USER="postgres"
DB_HOST="localhost"
DB_PORT="5432"

# ============================================
# BACKUP DIRECTORIES
# ============================================
BACKUP_DIR="/opt/storebackend/backups/database"
LOG_DIR="/var/log/storebackend"

# ============================================
# RETENTION POLICY
# ============================================
# Wie lange werden Backups aufbewahrt?
DAILY_RETENTION=7       # Tägliche Backups für 7 Tage
WEEKLY_RETENTION=28     # Wöchentliche Backups für 4 Wochen (28 Tage)
MONTHLY_RETENTION=365   # Monatliche Backups für 1 Jahr (365 Tage)

# ============================================
# NOTIFICATION SETTINGS
# ============================================
# E-Mail-Benachrichtigungen
ALERT_EMAIL="admin@localhost"
SEND_SUCCESS_NOTIFICATION="false"  # Nur bei Fehlern oder wöchentlich
SEND_ERROR_NOTIFICATION="true"

# Webhook für Slack/Discord/etc.
WEBHOOK_URL=""  # z.B. https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ============================================
# MONITORING THRESHOLDS
# ============================================
MAX_BACKUP_AGE_HOURS=26     # Warnung wenn letztes Backup älter ist
MIN_DISK_SPACE_GB=10        # Warnung wenn weniger Speicher verfügbar
MIN_BACKUP_COUNT=3          # Warnung wenn weniger Backups vorhanden

# ============================================
# REMOTE BACKUP SETTINGS (Optional)
# ============================================
# AWS S3
ENABLE_S3_BACKUP="false"
S3_BUCKET=""
S3_REGION="eu-central-1"
AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""

# Rsync zu Remote-Server
ENABLE_REMOTE_SYNC="false"
REMOTE_SERVER=""           # z.B. backup@backup-server.com
REMOTE_BACKUP_PATH=""      # z.B. /backup/storedb
REMOTE_SSH_KEY=""          # z.B. /root/.ssh/backup_key

# FTP/SFTP
ENABLE_FTP_BACKUP="false"
FTP_SERVER=""
FTP_USER=""
FTP_PASSWORD=""
FTP_PATH=""

# ============================================
# SERVICE SETTINGS
# ============================================
SERVICE_NAME="storebackend"
STOP_SERVICE_DURING_RESTORE="true"

# ============================================
# COMPRESSION SETTINGS
# ============================================
COMPRESSION_LEVEL=6  # 1-9, höher = besser komprimiert aber langsamer

# ============================================
# BACKUP FORMATS
# ============================================
CREATE_SQL_BACKUP="true"      # Plain SQL Format
CREATE_CUSTOM_BACKUP="true"   # PostgreSQL Custom Format
CREATE_TAR_BACKUP="false"     # Tar Archive (größer)

# ============================================
# ADVANCED SETTINGS
# ============================================
# Parallele Backups (für große Datenbanken)
PARALLEL_JOBS=1

# Vor-Backup und Nach-Backup Hooks
PRE_BACKUP_HOOK=""   # z.B. /opt/storebackend/scripts/pre-backup.sh
POST_BACKUP_HOOK=""  # z.B. /opt/storebackend/scripts/post-backup.sh

# Backup-Verschlüsselung
ENABLE_ENCRYPTION="false"
ENCRYPTION_KEY_FILE=""  # z.B. /etc/storebackend/backup.key
ENCRYPTION_RECIPIENT=""  # GPG Key ID

# ============================================
# LOGGING
# ============================================
LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR
LOG_RETENTION_DAYS=30

