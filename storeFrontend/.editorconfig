# EditorConfig is awesome: https://EditorConfig.org

root = true

[*]
charset = utf-8
indent_style = space
indent_size = 2
insert_final_newline = true
trim_trailing_whitespace = true

[*.ts]
quote_type = single

[*.md]
max_line_length = off
trim_trailing_whitespace = false
# markt.ma Frontend

Angular-basiertes Frontend fÃ¼r die Multi-Tenant E-Commerce SaaS-Plattform **markt.ma**.

## ğŸš€ ProjektÃ¼bersicht

Dieses Frontend konsumiert das Spring Boot Backend und bietet eine vollstÃ¤ndige VerwaltungsoberflÃ¤che fÃ¼r Store-Besitzer.

### Features

- âœ… **Authentifizierung**: Login & Registrierung mit JWT
- âœ… **Store-Verwaltung**: Erstellen und verwalten Sie mehrere Stores
- âœ… **Produkt-Management**: Produkte, Varianten, Kategorien und Medien
- âœ… **Bestellverwaltung**: Ãœbersicht und Statusverwaltung von Bestellungen
- âœ… **Domain-Verwaltung**: Subdomains und Custom Domains
- âœ… **Responsive Design**: Optimiert fÃ¼r Desktop und Mobile

## ğŸ“‹ Voraussetzungen

- **Node.js**: Version 18 oder hÃ¶her
- **npm**: Version 9 oder hÃ¶her
- **Angular CLI**: Version 17 (wird automatisch installiert)

## ğŸ› ï¸ Installation

### 1. Dependencies installieren

```bash
cd storeFrontend
npm install
```

### 2. Backend-URL konfigurieren

Passen Sie die Backend-URL in den Environment-Dateien an:

**Entwicklung** (`src/environments/environment.ts`):
```typescript
export const environment = {
  production: false,
  apiUrl: 'http://localhost:8080/api',
  publicApiUrl: 'http://localhost:8080/api/public'
};
```

**Produktion** (`src/environments/environment.prod.ts`):
```typescript
export const environment = {
  production: true,
  apiUrl: 'https://api.markt.ma/api',
  publicApiUrl: 'https://api.markt.ma/api/public'
};
```

## ğŸš€ Entwicklung

### Entwicklungsserver starten

```bash
npm start
```

Die Anwendung ist unter `http://localhost:4200` erreichbar.

Die Anwendung lÃ¤dt automatisch neu, wenn Sie Ã„nderungen an den Quelldateien vornehmen.

### Build fÃ¼r Produktion

```bash
npm run build:prod
```

Die Build-Artefakte werden im Verzeichnis `dist/markt-ma-frontend` gespeichert.

## ğŸ“ Projektstruktur

```
storeFrontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ core/                    # Kern-Module (singleton services)
â”‚   â”‚   â”‚   â”œâ”€â”€ guards/              # Route Guards (authGuard)
â”‚   â”‚   â”‚   â”œâ”€â”€ interceptors/        # HTTP Interceptors (JWT, Error Handling)
â”‚   â”‚   â”‚   â”œâ”€â”€ models/              # TypeScript Interfaces & Models
â”‚   â”‚   â”‚   â””â”€â”€ services/            # API Services
â”‚   â”‚   â”‚       â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ store.service.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ product.service.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ order.service.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ domain.service.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ category.service.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ media.service.ts
â”‚   â”‚   â”‚       â””â”€â”€ public-api.service.ts
â”‚   â”‚   â”œâ”€â”€ features/                # Feature-Module
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/                # Login & Registrierung
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/           # Haupt-Dashboard
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/              # Store-Verwaltung
â”‚   â”‚   â”‚   â”œâ”€â”€ products/            # Produkt-Verwaltung
â”‚   â”‚   â”‚   â””â”€â”€ orders/              # Bestellverwaltung
â”‚   â”‚   â”œâ”€â”€ shared/                  # Gemeinsam genutzte Komponenten
â”‚   â”‚   â”œâ”€â”€ app.component.ts         # Root Component
â”‚   â”‚   â”œâ”€â”€ app.routes.ts            # Routing-Konfiguration
â”‚   â”‚   â””â”€â”€ app.config.ts            # App-Konfiguration
â”‚   â”œâ”€â”€ assets/                      # Statische Assets (Bilder, Icons)
â”‚   â”œâ”€â”€ environments/                # Environment-Konfigurationen
â”‚   â”œâ”€â”€ index.html                   # Haupt-HTML
â”‚   â”œâ”€â”€ main.ts                      # App Bootstrap
â”‚   â””â”€â”€ styles.scss                  # Globale Styles
â”œâ”€â”€ angular.json                     # Angular CLI Konfiguration
â”œâ”€â”€ package.json                     # NPM Dependencies
â”œâ”€â”€ tsconfig.json                    # TypeScript Konfiguration
â””â”€â”€ README.md                        # Diese Datei
```

## ğŸ”Œ API Integration

### Services

Alle Services befinden sich unter `src/app/core/services/` und konsumieren das Backend:

#### AuthService
```typescript
- register(request: RegisterRequest): Observable<AuthResponse>
- login(request: LoginRequest): Observable<AuthResponse>
- logout(): void
- getMe(): Observable<User>
- isAuthenticated(): boolean
```

#### StoreService
```typescript
- getMyStores(): Observable<Store[]>
- createStore(request: CreateStoreRequest): Observable<Store>
- updateStore(storeId, request): Observable<Store>
- deleteStore(storeId): Observable<void>
```

#### ProductService
```typescript
- getProducts(storeId, status?): Observable<Product[]>
- getProduct(storeId, productId): Observable<Product>
- createProduct(storeId, request): Observable<Product>
- updateProduct(storeId, productId, request): Observable<Product>
- deleteProduct(storeId, productId): Observable<void>
```

#### OrderService
```typescript
- getOrders(storeId, status?): Observable<Order[]>
- getOrder(storeId, orderId): Observable<Order>
- updateOrderStatus(storeId, orderId, status, note?): Observable<Order>
```

#### DomainService
```typescript
- getDomains(storeId): Observable<Domain[]>
- createDomain(storeId, request): Observable<Domain>
- deleteDomain(storeId, domainId): Observable<void>
```

#### PublicApiService (fÃ¼r Storefront)
```typescript
- resolveStore(host): Observable<PublicStore>
- getCart(sessionId): Observable<Cart>
- addToCart(request): Observable<Cart>
- checkout(request): Observable<Order>
```

## ğŸ” Authentifizierung

Das Frontend verwendet JWT-basierte Authentifizierung:

1. **Login**: POST zu `/api/auth/login` â†’ erhÃ¤lt JWT Token
2. **Token-Speicherung**: Token wird in localStorage gespeichert
3. **HTTP Interceptor**: FÃ¼gt automatisch `Authorization: Bearer <token>` zu allen Requests hinzu
4. **Route Guards**: SchÃ¼tzen geschÃ¼tzte Routen (Dashboard, Store-Management)

## ğŸ¨ Styling

- **CSS Framework**: Custom SCSS (kein externes Framework)
- **Design System**: Konsistente Farben und Komponenten
- **Responsive**: Mobile-First Approach

### Haupt-Farben
```scss
Primary: #667eea (Lila/Blau)
Secondary: #764ba2
Success: #28a745
Danger: #dc3545
Warning: #ffc107
```

## ğŸ“¡ Backend-Verbindung

Stellen Sie sicher, dass Ihr Backend lÃ¤uft:

```bash
# Im Backend-Verzeichnis (storeBackend/)
mvn spring-boot:run
```

Backend sollte unter `http://localhost:8080` erreichbar sein.

## ğŸ§ª Testing

```bash
# Unit Tests ausfÃ¼hren
npm test

# E2E Tests (falls konfiguriert)
npm run e2e
```

## ğŸ“¦ Deployment

### 1. Production Build erstellen

```bash
npm run build:prod
```

### 2. Build-Output deployen

Der Inhalt von `dist/markt-ma-frontend/` kann auf jeden Webserver deployed werden:

- **Nginx**
- **Apache**
- **AWS S3 + CloudFront**
- **Netlify**
- **Vercel**

### Nginx Beispiel-Konfiguration

```nginx
server {
    listen 80;
    server_name app.markt.ma;

    root /var/www/markt-ma-frontend;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # API Proxy zum Backend
    location /api/ {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## ğŸ”§ Troubleshooting

### CORS-Fehler

Wenn Sie CORS-Fehler erhalten, stellen Sie sicher, dass Ihr Backend CORS richtig konfiguriert hat:

```java
// In Spring Boot Backend (SecurityConfig.java)
@Bean
public CorsConfigurationSource corsConfigurationSource() {
    CorsConfiguration configuration = new CorsConfiguration();
    configuration.setAllowedOrigins(Arrays.asList("http://localhost:4200", "https://app.markt.ma"));
    configuration.setAllowedMethods(Arrays.asList("GET", "POST", "PUT", "DELETE", "OPTIONS"));
    configuration.setAllowedHeaders(Arrays.asList("*"));
    configuration.setAllowCredentials(true);

    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
    source.registerCorsConfiguration("/**", configuration);
    return source;
}
```

### Backend-Verbindung fehlgeschlagen

1. ÃœberprÃ¼fen Sie, ob das Backend lÃ¤uft: `http://localhost:8080/api/auth/login`
2. ÃœberprÃ¼fen Sie die `environment.ts` Konfiguration
3. PrÃ¼fen Sie die Browser-Konsole auf Fehler

## ğŸ¤ Zusammenarbeit mit dem Backend

Dieses Frontend ist speziell fÃ¼r Ihr Spring Boot Backend entwickelt:

**Backend-Repository**: `storeBackend/`
**Frontend-Repository**: `storeFrontend/` (dieses Projekt)

### Typische Entwicklung-Workflow

1. **Backend starten**: `mvn spring-boot:run` (Port 8080)
2. **Frontend starten**: `npm start` (Port 4200)
3. **Testen**: API-Aufrufe Ã¼ber Frontend-UI
4. **Debuggen**: Browser DevTools + Backend Logs

## ğŸ“š Weitere Ressourcen

- [Angular Dokumentation](https://angular.io/docs)
- [RxJS Dokumentation](https://rxjs.dev/)
- [TypeScript Handbuch](https://www.typescriptlang.org/docs/)

## ğŸ†˜ Support

Bei Fragen oder Problemen:

1. ÃœberprÃ¼fen Sie die Backend-Logs
2. ÃœberprÃ¼fen Sie die Browser-Konsole
3. Testen Sie die API-Endpoints direkt (z.B. mit Postman oder der `ecommerce-test.http` Datei)

## ğŸ“ Lizenz

Proprietary - markt.ma Platform

---

**Entwickelt fÃ¼r markt.ma - Multi-Tenant E-Commerce SaaS Platform**

