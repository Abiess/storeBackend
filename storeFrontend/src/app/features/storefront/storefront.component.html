<!-- Modern Storefront Layout (idealo.de inspired) -->
<div class="modern-storefront">
  <!-- Top Bar (Language Selection, etc.) -->
  <app-top-bar></app-top-bar>

  <!-- Modern Store Header -->
  <app-modern-store-header
    [storeName]="store?.name || 'Online Shop'"
    [cartItemCount]="cartItemCount"
    [showSearch]="true"
    [showAccount]="true"
    (cartClick)="goToCart()"
    (searchChange)="onSearchChange($event)">
  </app-modern-store-header>

  <!-- Hero Section (Store Slider) -->
  <div class="hero-section">
    <app-store-slider-viewer
      *ngIf="storeId && !loading"
      [storeId]="storeId">
    </app-store-slider-viewer>
  </div>

  <!-- Featured Products (Before Main Content) -->
  <div class="featured-sections" *ngIf="!selectedCategory && !loading">
    <app-featured-products
      [storeId]="storeId"
      type="featured"
      [limit]="8">
    </app-featured-products>

    <app-featured-products
      [storeId]="storeId"
      type="top"
      [limit]="8">
    </app-featured-products>

    <app-featured-products
      [storeId]="storeId"
      type="new"
      [limit]="8">
    </app-featured-products>
  </div>

  <!-- Main Store Layout with Sidebar -->
  <app-store-layout>
    <!-- Sidebar: Categories -->
    <div sidebar>
      <app-store-sidebar
        [categories]="categories"
        [selectedCategory]="selectedCategory"
        (categorySelect)="selectCategory($event)">
      </app-store-sidebar>
    </div>

    <!-- Main Content: Product Grid -->
    <div main>
      <app-product-grid
        [products]="displayedProducts || filteredProducts"
        [loading]="loading"
        [title]="selectedCategory ? selectedCategory.name : (searchQuery ? ('storefront.searchResults' | translate) : ('storefront.allProducts' | translate))"
        [emptyTitle]="searchQuery ? ('storefront.noSearchResults' | translate) : ('storefront.noProducts' | translate)"
        [emptyMessage]="searchQuery ? ('storefront.noSearchResultsHint' | translate) : ('storefront.noProductsHint' | translate)">

        <!-- Product Cards -->
        <app-modern-product-card
          *ngFor="let product of displayedProducts || filteredProducts"
          [product]="product"
          [isAddingToCart]="addingToCart"
          [showDescription]="true"
          (addToCart)="addToCart($event)"
          (quickView)="openQuickView($event)">
        </app-modern-product-card>
      </app-product-grid>
    </div>
  </app-store-layout>

  <!-- QuickView Modal (unchanged) -->
  <app-product-quick-view
    [product]="quickViewProduct"
    [isOpen]="quickViewOpen"
    (close)="closeQuickView()"
    (addToCartEvent)="onQuickViewAddToCart($event)"
    (viewDetailsEvent)="onQuickViewDetails($event)">
  </app-product-quick-view>

  <!-- Footer -->
  <footer class="modern-footer">
    <div class="footer-container">
      <div class="footer-grid">
        <div class="footer-col">
          <h4>{{ store?.name || 'Online Shop' }}</h4>
          <p class="footer-tagline">{{ 'common.poweredBy' | translate }}</p>
        </div>

        <div class="footer-col">
          <h4>{{ 'navigation.categories' | translate }}</h4>
          <ul class="footer-links">
            <li *ngFor="let category of categories">
              <a (click)="selectCategory(category)">{{ category.name }}</a>
            </li>
          </ul>
        </div>

        <div class="footer-col">
          <h4>{{ 'footer.info' | translate }}</h4>
          <ul class="footer-links">
            <li><a>{{ 'footer.imprint' | translate }}</a></li>
            <li><a>{{ 'footer.privacy' | translate }}</a></li>
            <li><a>{{ 'footer.terms' | translate }}</a></li>
            <li><a>{{ 'footer.shipping' | translate }}</a></li>
          </ul>
        </div>

        <div class="footer-col">
          <h4>{{ 'footer.contact' | translate }}</h4>
          <ul class="footer-links">
            <li><a>{{ 'footer.contact' | translate }}</a></li>
            <li><a>{{ 'footer.faq' | translate }}</a></li>
            <li><a>{{ 'footer.support' | translate }}</a></li>
          </ul>
        </div>
      </div>

      <div class="footer-bottom">
        <p>{{ 'footer.copyright' | translate: { year: currentYear } }}</p>
      </div>
    </div>
  </footer>
</div>

