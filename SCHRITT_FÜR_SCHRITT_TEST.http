### üöÄ SCHRITT-F√úR-SCHRITT TEST GUIDE
### Teste die Anwendung peu √† peu (Schritt f√ºr Schritt)

### ============================================
### SCHRITT 1: Neuen Benutzer registrieren
### ============================================
POST http://localhost:8080/api/auth/register
Content-Type: application/json

{
  "email": "neuertester@example.com",
  "password": "Test123!Sicher"
}

# ‚úÖ Erwartetes Ergebnis:
# - Status: 200 OK
# - User ID wird zur√ºckgegeben
# - User bekommt automatisch FREE Plan zugewiesen

###

### ============================================
### SCHRITT 2: Mit dem Benutzer anmelden
### ============================================
POST http://localhost:8080/api/auth/login
Content-Type: application/json

{
  "email": "neuertester@example.com",
  "password": "Test123!Sicher"
}

> {%
    client.global.set("auth_token", response.body.token);
    client.global.set("user_id", response.body.userId);
    client.log("‚úÖ Token gespeichert: " + response.body.token);
%}

#   ‚úÖ Erwartetes Ergebnis:
# - Status: 200 OK
# - JWT Token wird zur√ºckgegeben
# - Token wird automatisch f√ºr folgende Requests gespeichert

###

### ============================================
### SCHRITT 3: Eigene User-Daten abrufen
### ============================================
GET http://localhost:8080/api/auth/me
Authorization: Bearer {{auth_token}}

# ‚úÖ Erwartetes Ergebnis:
# - Deine User-Daten
# - Plan: FREE
# - Roles: [USER]

###

### ============================================
### SCHRITT 4: Verf√ºgbare Plans anzeigen
### ============================================
GET http://localhost:8080/api/plans
Authorization: Bearer {{auth_token}}

# ‚úÖ Erwartetes Ergebnis:
# - Liste mit FREE, PRO, ENTERPRISE Plans
# - Limits f√ºr jeden Plan

###

### ============================================
### SCHRITT 5: Ersten Store erstellen
### ============================================
POST http://localhost:8080/api/me/stores
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
  "name": "Mein Testshop",
  "slug": "testshop"
}

> {%
    client.global.set("store_id", response.body.id);
    client.log("‚úÖ Store ID gespeichert: " + response.body.id);
%}

# ‚úÖ Erwartetes Ergebnis:
# - Store wird erstellt
# - Automatische Subdomain: testshop.markt.ma
# - Store ID wird gespeichert

###

### ============================================
### SCHRITT 6: Alle meine Stores anzeigen
### ============================================
GET http://localhost:8080/api/me/stores
Authorization: Bearer {{auth_token}}

# ‚úÖ Erwartetes Ergebnis:
# - Liste mit deinen Stores
# - Max 1 Store im FREE Plan

###

### ============================================
### SCHRITT 7: Store Details abrufen
### ============================================
GET http://localhost:8080/api/stores/{{store_id}}
Authorization: Bearer {{auth_token}}

# ‚úÖ Erwartetes Ergebnis:
# - Vollst√§ndige Store-Informationen
# - Settings, Theme, etc.

###

### ============================================
### SCHRITT 8: Store Domains anzeigen
### ============================================
GET http://localhost:8080/api/stores/{{store_id}}/domains
Authorization: Bearer {{auth_token}}

# ‚úÖ Erwartetes Ergebnis:
# - Automatisch erstellte Subdomain: testshop.markt.ma
# - isPrimary: true
# - isVerified: true

###

### ============================================
### SCHRITT 9: Produkt erstellen
### ============================================
POST http://localhost:8080/api/stores/{{store_id}}/products
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
  "title": "Erstes Test-Produkt",
  "description": "Ein tolles Produkt zum Testen",
  "basePrice": 19.99,
  "status": "ACTIVE"
}

> {%
    client.global.set("product_id", response.body.id);
    client.log("‚úÖ Produkt ID gespeichert: " + response.body.id);
%}

# ‚úÖ Erwartetes Ergebnis:
# - Produkt wird erstellt
# - Status: ACTIVE
# - Preis: 19.99

###

### ============================================
### SCHRITT 10: Alle Produkte des Stores abrufen
### ============================================
GET http://localhost:8080/api/stores/{{store_id}}/products
Authorization: Bearer {{auth_token}}

# ‚úÖ Erwartetes Ergebnis:
# - Liste mit allen Produkten
# - Max 50 Produkte im FREE Plan

###

### ============================================
### SCHRITT 11: Produkt bearbeiten
### ============================================
PUT http://localhost:8080/api/stores/{{store_id}}/products/{{product_id}}
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
  "title": "Aktualisiertes Test-Produkt",
  "description": "Neue Beschreibung",
  "basePrice": 24.99,
  "status": "ACTIVE"
}

# ‚úÖ Erwartetes Ergebnis:
# - Produkt wird aktualisiert
# - Neuer Preis: 24.99

###

### ============================================
### SCHRITT 12: Produkt-Variante erstellen
### ============================================
POST http://localhost:8080/api/stores/{{store_id}}/products/{{product_id}}/variants
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
  "sku": "TEST-001-M",
  "variantName": "Gr√∂√üe M",
  "price": 24.99,
  "stockQuantity": 100
}

> {%
    client.global.set("variant_id", response.body.id);
%}

# ‚úÖ Erwartetes Ergebnis:
# - Variante wird erstellt
# - SKU: TEST-001-M
# - Lagerbestand: 100

###

### ============================================
### SCHRITT 13: Store Settings aktualisieren
### ============================================
PUT http://localhost:8080/api/stores/{{store_id}}/settings
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
  "storeName": "Mein Aktualisierter Shop",
  "storeDescription": "Der beste Online-Shop",
  "contactEmail": "kontakt@meinshop.de",
  "currency": "EUR",
  "language": "de"
}

# ‚úÖ Erwartetes Ergebnis:
# - Settings werden aktualisiert
# - Sprache: Deutsch
# - W√§hrung: Euro

###

### ============================================
### SCHRITT 14: Store Theme anpassen
### ============================================
PUT http://localhost:8080/api/stores/{{store_id}}/theme
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
  "primaryColor": "#FF6B6B",
  "secondaryColor": "#4ECDC4",
  "fontFamily": "Roboto",
  "templateName": "modern"
}

# ‚úÖ Erwartetes Ergebnis:
# - Theme wird aktualisiert
# - Neue Farben werden gespeichert

###

### ============================================
### SCHRITT 15: PUBLIC API - Store √ºber Subdomain aufl√∂sen
### ============================================
GET http://localhost:8080/api/public/store/resolve?host=testshop.markt.ma

# ‚úÖ Erwartetes Ergebnis:
# - Store wird gefunden
# - Alle √∂ffentlichen Store-Daten
# - KEINE Authentifizierung n√∂tig!

###

### ============================================
### SCHRITT 16: PUBLIC API - Store √ºber Slug aufl√∂sen
### ============================================
GET http://localhost:8080/api/public/store/by-slug/testshop

# ‚úÖ Erwartetes Ergebnis:
# - Store wird gefunden
# - Gleiche Daten wie bei Domain-Aufl√∂sung

###

### ============================================
### SCHRITT 17: PUBLIC API - Produkte des Stores abrufen (√∂ffentlich)
### ============================================
GET http://localhost:8080/api/public/stores/{{store_id}}/products

# ‚úÖ Erwartetes Ergebnis:
# - Alle AKTIVEN Produkte
# - √ñffentlich ohne Login abrufbar

###

### ============================================
### SCHRITT 18: Domain-Verf√ºgbarkeit pr√ºfen
### ============================================
GET http://localhost:8080/api/public/domain/check-availability?host=neuer-shop.markt.ma

# ‚úÖ Erwartetes Ergebnis:
# - available: true/false
# - Typ: subdomain

###

### ============================================
### SCHRITT 19: Custom Domain hinzuf√ºgen (wenn nicht FREE Plan)
### ============================================
POST http://localhost:8080/api/stores/{{store_id}}/domains/custom
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
  "host": "meinshop.example.com"
}

> {%
    client.global.set("custom_domain_id", response.body.id);
%}

# ‚ö†Ô∏è ACHTUNG: Im FREE Plan nicht m√∂glich!
# Erwartete Fehlermeldung: "Plan limit exceeded"

###

### ============================================
### SCHRITT 20: Produkt l√∂schen
### ============================================
DELETE http://localhost:8080/api/stores/{{store_id}}/products/{{product_id}}
Authorization: Bearer {{auth_token}}

# ‚úÖ Erwartetes Ergebnis:
# - Produkt wird gel√∂scht
# - Status: 204 No Content

###

### ============================================
### SCHRITT 21: Store l√∂schen
### ============================================
DELETE http://localhost:8080/api/stores/{{store_id}}
Authorization: Bearer {{auth_token}}

# ‚úÖ Erwartetes Ergebnis:
# - Store wird gel√∂scht
# - Alle zugeh√∂rigen Daten werden entfernt

###

### ============================================
### SCHRITT 22: Ausloggen / Token testen
### ============================================
GET http://localhost:8080/api/auth/me
Authorization: Bearer ung√ºltiger-token-12345

# ‚úÖ Erwartetes Ergebnis:
# - Status: 401 Unauthorized
# - Token ist ung√ºltig

###

### ============================================
### üéâ TEST ABGESCHLOSSEN!
### ============================================
### Du hast alle Hauptfunktionen getestet:
### ‚úÖ Authentifizierung (Register, Login)
### ‚úÖ Store Management (Create, Read, Update, Delete)
### ‚úÖ Domain Management (Subdomains, Custom Domains)
### ‚úÖ Produkt Management (CRUD + Variants)
### ‚úÖ Settings & Theme
### ‚úÖ Public API (Store Resolution)
### ‚úÖ Plan Limits
###
### N√§chste Schritte:
### 1. Frontend mit Store verbinden
### 2. Bild-Upload testen (MinIO)
### 3. E-Commerce Features (Warenkorb, Checkout)
### ============================================

